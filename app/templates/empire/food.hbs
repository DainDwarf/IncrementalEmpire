<div>
  {{model.name}} can store maximum of {{model.foodStorage}} food.
  {{#each foodStorageBuildings as |building|}}
    <AssignPoint @class="ml-2" @disabled={{model.dead}}
                 @value={{building.pending}} @onChange={{action "build" building target=empireCtl}}
                 @step={{empireCtl.assignValue}} @max={{add building.builders (min model.availableWorkers (floor (div model.material building.materialCost)))}}>
      Construct more {{building.name}}: {{building.qty}} ({{building.pending}}) ({{building.materialCost}} material =&gt; {{building.foodStorage}} food max)
    </AssignPoint>
  {{/each}}
</div>
<hr>
<div>
  {{model.name}} has {{model.food}} food.
  {{#if model.foodProduction}}
    You generate {{model.foodProduction}} food per turn.
  {{/if}}
</div>
{{#if empireCtl.isLowFood}}
  <div class="text-danger">
    You will lose some population next turn.
  </div>
{{/if}}
<div>
  Food production efficiency: {{foodEfficiencyDisplay}}
</div>
{{#if model.capitalFood.maxWorkers}}
  <AssignPoint @class="ml-2" @disabled={{model.dead}}
               @value={{model.capitalFood.workers}} @onChange={{action "assignWorker" model.capitalFood target=empireCtl}}
               @step={{empireCtl.assignValue}} @max={{min (add model.capitalFood.workers model.availableWorkers) (mult model.capitalFood.maxWorkers model.capitalFood.qty)}}>
    {{capitalize model.capitalFood.name}}: <DisplayValue @tagName="span" @type="worker" @value="{{model.capitalFood.workers}}/{{mult model.capitalFood.maxWorkers model.capitalFood.qty}}"/> (Each producing {{model.capitalFood.foodProduction}})
  </AssignPoint>
{{/if}}
{{#each foodProductionBuildings as |building|}}
  <AssignPoint @class="ml-2" @disabled={{model.dead}}
               @value={{building.workers}} @onChange={{action "assignWorker" building target=empireCtl}}
               @step={{empireCtl.assignValue}} @max={{min (add building.workers model.availableWorkers) (mult building.maxWorkers building.qty)}}>
    {{capitalize building.name}}: <DisplayValue @tagName="span" @type="worker" @value="{{building.workers}}/{{mult building.maxWorkers building.qty}}"/> (Each producing {{building.foodProduction}})
  </AssignPoint>
  <AssignPoint @class="ml-2" @disabled={{model.dead}}
               @value={{building.pending}} @onChange={{action "build" building target=empireCtl}}
               @step={{empireCtl.assignValue}} @max={{add building.builders (min model.availableWorkers (floor (div model.material building.materialCost)))}}>
    Construct more {{building.name}}: {{building.qty}} ({{building.pending}}) ({{building.materialCost}} material =&gt; {{building.maxWorkers}} <DisplayValue @tagName="span" @type="worker" /> max)
  </AssignPoint>
{{/each}}
<button type="button"
        class="btn btn-outline-success mt-1"
        hidden={{not isGenFoodAvailable}}
        disabled={{isGenFoodDisabled}}
        onclick={{action "genFood"}}>
  Horn of Plenty <DisplayValue @tagName="small" @type="magic" @value="1" />
</button>
{{outlet}}