<div class="container-fluid bg-light">
  <Input value={{model.name}} @focus-out={{action "updateTemplateName"}}/> the {{model.type}} empire
  <span class="float-right">You have {{remainingTemplatePoints}}/{{templatePoints}} template points</span>
</div>
<div class="ml-2">
  Capital:
  <select class="ml-1" onchange={{action "selectCapital" value="target.value"}}>
    {{#each capitalBuildings as |capital|}}
      <option
        value={{capital.lvl}}
        selected={{eq capital selectedCapital}}
        disabled={{gt capital.TPcost (add selectedCapital.TPcost remainingTemplatePoints)}}
      >
        {{capitalize capital.name}}
        {{#if capital.TPcost}}
          ({{capital.TPcost}} TP)
        {{/if}}
      </option>
    {{/each}}
  </select>
</div>
<AssignPoint @class="ml-2"
             @value={{model.popTP}} @onChange={{action "changeRessource" "popTP"}}
             @max={{add remainingTemplatePoints model.popTP}}>
  <DisplayValue @type="population" @value={{rebirthPop}}/> ({{model.popTP}} TP)
</AssignPoint>
<AssignPoint @class="ml-2"
             @value={{model.foodTP}} @onChange={{action "changeRessource" "foodTP"}}
             @max={{add remainingTemplatePoints model.foodTP}}>
  <DisplayValue @type="food" @value={{rebirthFood}}/> ({{model.foodTP}} TP)
</AssignPoint>
<AssignPoint @class="ml-2" @hidden={{not materialAvailable}}
             @value={{model.materialTP}} @onChange={{action "changeRessource" "materialTP"}}
             @max={{add remainingTemplatePoints model.materialTP}}>
  <DisplayValue @type="material" @value={{rebirthMaterial}}/> ({{model.materialTP}} TP)
</AssignPoint>
<AssignPoint @class="ml-2" @isVisible={{eq model.type "religious"}}
             @value={{model.spellTP}} @onChange={{action "changeRessource" "spellTP"}}
             @max={{add remainingTemplatePoints model.spellTP}}>
  Max spell points: {{rebirthSpellPoints}} ({{model.spellTP}} TP)
</AssignPoint>
<hr>
{{#each nonCapitalBuildings as |building|}}
  <AssignPoint @class="ml-2"
               @value={{building.qty}} @onChange={{action "addBuilding" building}}
               @max={{floor (div (add (mult building.qty building.TPcost) remainingTemplatePoints) building.TPcost)}}>
    {{capitalize building.name}}: {{building.qty}} ({{building.TPcost}})
  </AssignPoint>
{{/each}}
<div class="container">
  <button type="button" class="btn btn-outline-danger my-2" onclick={{action "rebirth"}}>
    <div>Restart with this {{model.type}} empire</div>
    <small>Gain <DisplayValue @type={{game.rebirthPointsType}} @value={{game.rebirthPoints}} /> from current {{game.empire.type}} empire</small>
  </button>
</div>
<div class="container small">
  {{#if (eq model.type "religious")}}
    Religious empires produces more <DisplayValue @type="mana"/> if you have more population and spend more turns. You need at least 2 population and 20 turns to start producing <DisplayValue @type="mana"/>
  {{else if (eq model.type "economical")}}
    Economical empires produces more <DisplayValue @type="money"/> if you create more ressources, but decreases if you take too much turns. You need at least 20 turns to start producing <DisplayValue @type="money"/>.
  {{/if}}
</div>
{{outlet}}